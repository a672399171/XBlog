<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.zzu.xblog.dao.UserDao">
    <!-- 为dao接口方法提供sql语句配置 -->

    <select id="searchUserByEmail" resultType="User">
        select user_id,email,`hash`,salt,nickname,reg_time,fans_count,attention_count,photo_src,motto,interest,sex
        from t_user
        where email=#{email}
    </select>

    <insert id="addUser" useGeneratedKeys="true" keyProperty="userId">
        insert IGNORE into t_user(email,`hash`,salt,nickname,motto,interest) VALUES
            (#{email},#{hash},#{salt},#{nickname},#{motto},#{interest});
    </insert>

    <update id="changePwd">
        UPDATE t_user set salt=#{salt},`hash`=#{hash} where email=#{email}
    </update>

    <select id="getUserById" resultType="User">
        select user_id,email,nickname,reg_time,fans_count,attention_count,photo_src,motto,interest,sex
        from t_user
        where user_id=#{id}
    </select>
</mapper>